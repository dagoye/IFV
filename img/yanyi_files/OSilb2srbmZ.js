if (self.CavalryLogger) { CavalryLogger.start_js(["Li4qc"]); }

__d("DataAtomBase",["invariant","AdsDataAtomActionTracking","AdsDataAtomInstrumentation","AdsDataAtomPerformanceUtil","AdsDataDispatchUtils","AdsDispatchCycle","AdsReactBatchedUpdatesUtils","EventEmitter","FBLogger","abstractMethod","debounce","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdsDataAtomPerformanceUtil").startPerformanceMeasurements,i=b("AdsDataAtomPerformanceUtil").endPerformanceMeasurements;function a(){this.__flushInforms=b("debounce")(function(){this.dispatch({action:{priority:"HIGH",type:"FLUSH_INFORMS"}})}.bind(this),0),this.$1={},this.__callbacksNames={},this.$2={},this.$3={},this.__dispatchTokenActionTypes={},this.$4=1,this.$5=null,this.__dispatchSeqNumber=0,this.__catchErrors=!0,this.$7=[],this.__timeOfLastInform=Date.now(),this.__dataPluginsAlteredState={},this.$8=new(b("EventEmitter"))(),this.$9=[],this.__previousLegacyFluxReducerProviderState={},this.$10=new(b("EventEmitter"))(),this.$6=!1,this.$11=!1,this.$12=[],this.$14=100,this.$13=new Array(this.$14),this.__providersLastUpdatedAt={}}a.prototype.register=function(a,c,d,e){__p&&__p();b("AdsDataAtomActionTracking").shouldWrapCallback()&&(a=b("AdsDataAtomActionTracking").wrapCallback(a,c));var f=this.$15(c),g=this.__invokeCallback.bind(this,f,a);this.$1[f]=g;if(b("gkx")("AT5lJ8-3q5YUY6e7igLwYoQrFsjizZVZahBlI98yjOcGkGcpxEvcBVBRUQfAWyNnxUg79RnvjQAxIoL8N6L7aw6a")){c=d?d.getActionTypes():null;c!=null&&Array.isArray(c)?(c.forEach(function(a){this.$2[a]||(this.$2[a]={}),this.$2[a][f]=g}.bind(this)),this.__dispatchTokenActionTypes[f]=c):this.$3[f]=g}this.__callbacksNames[f]=e;this.$5&&this.$5.register(f,g);b("AdsDataAtomActionTracking").registered(f,f,d);return f};a.prototype.unregister=function(a){this.$1[a]||g(0,undefined,a);delete this.$1[a];if(b("gkx")("AT5lJ8-3q5YUY6e7igLwYoQrFsjizZVZahBlI98yjOcGkGcpxEvcBVBRUQfAWyNnxUg79RnvjQAxIoL8N6L7aw6a")){var c=this.__dispatchTokenActionTypes[a];c?(c.forEach(function(b){delete this.$2[b][a]}.bind(this)),delete this.__dispatchTokenActionTypes[a]):delete this.$3[a]}b("AdsDataAtomActionTracking").unregistered(a)};a.prototype.waitFor=function(a){b("AdsDataAtomActionTracking").doWaitFor(a);var c=this.$5;c||g(0,undefined);c.waitFor(a);b("AdsDataAtomActionTracking").didWaitFor(a)};a.prototype.isDispatching=function(){return!!this.$5};a.prototype.__invokeCallback=function(a,c,d){if(this.__catchErrors)try{c(d)}catch(c){a={action_type_on_error:d&&d.action&&d.action.type,error_type:"FLUX_STORE",payload_on_error:d,store_name:this.__callbacksNames[a]};b("FBLogger")("ads-data-plugins").catching(c).warn("Error in DataAtom callback: %s",JSON.stringify(a))}else c(d)};a.prototype.$15=function(a){var b=a?a+"_":"ID_";a=a||b+this.$4++;while(this.$1[a])a=b+this.$4++;return a};a.prototype.$16=function(a){a=a.action;if(a){var b=a.type||a.actionType;a.type=b;a.actionType=b}};a.prototype.$17=function(a,b){this.__invokeCallback(a.provider,function(b){b=b.action;var c=this.__dataPluginsAlteredState[a.provider];b=a.reduce(this.__dataPluginsAlteredState,b);if(c!==b){this.__dataPluginsAlteredState=babelHelpers["extends"]({},this.__dataPluginsAlteredState,(c={},c[a.provider]=b,c));this.$8.emit(a.provider);this.__providersLastUpdatedAt[a.provider]=Date.now()}}.bind(this),b)};a.prototype.$18=function(a,b){this.__invokeCallback(a,function(b){b=b.action;b=b.data;if(Object.prototype.hasOwnProperty.call(b,a)){var c;this.__dataPluginsAlteredState=babelHelpers["extends"]({},this.__dataPluginsAlteredState,(c={},c[a]=b[a],c))}else delete this.__dataPluginsAlteredState[a];this.$8.emit(a)}.bind(this),b)};a.prototype.getDebuggerActionDispatchQueue=function(){return this.$13};a.prototype.updateCaptureRate=function(a){a>0&&(this.$13.length+=a-this.$14,this.$14=a)};a.prototype.$19=function(a,c,d){__p&&__p();var e=[];this.$9.forEach(function(a){this.__dataPluginsAlteredState[a.provider]&&this.__previousLegacyFluxReducerProviderState[a.provider]!==this.__dataPluginsAlteredState[a.provider]&&(e.push(a),this.__previousLegacyFluxReducerProviderState[a.provider]=this.__dataPluginsAlteredState[a.provider])}.bind(this));var f=b("AdsDataDispatchUtils").mergeReducers(b("AdsDataDispatchUtils").getDataReducers(c),e),g=[];for(var f=f,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;var k=this.__dataPluginsAlteredState[j.provider];g.push({providerName:j.provider,alteredState:k})}k={actionItem:c,alteredStates:g,newState:this.__dataPluginsAlteredState,sequenceNumber:a,siblings:[],shouldDisplay:!0,isActive:!0,debugging:{stack:new Error().stack,options:(j=d)!=null?j:{line:"0",module:"No Module"}}};this.$10.emit("DEBUGGER",k);this.$13.push(k);this.$13.shift()};a.prototype.revert=function(a,c){__p&&__p();var d={};this.$11=!0;b("gkx")("AT4RrKECfeu0dwEyWZXOaqlikDdCjlGcpxqsqcTpwi2VzpIQ6VBeA61bPQ3aUjnjCck")&&(this.__allowInforms=!0);c.forEach(function(a){d[a]=this.$18.bind(this,a)}.bind(this));c={type:"ADS_DATA_ATOM.REVERT",actionType:"ADS_DATA_ATOM.REVERT",data:a};a={action:c};Object.assign(d,this.$1);this.$5=new(b("AdsDispatchCycle"))(d,a);this.$5.start();this.$5=null};a.prototype.commitRevert=function(){this.$11=!1,this.$12=[]};a.prototype.undoRevert=function(a){var b=Object.keys(a).filter(function(b){return a[b]!==this.__dataPluginsAlteredState[b]}.bind(this));this.revert(a,b);this.$11=!1;while(this.$12.length>0&&!this.$11)this.$11=!1,this.dispatch.apply(this,this.$12.shift())};a.prototype.__dispatch=function(a){__p&&__p();var c=a.action;this.__dispatchSeqNumber++;h(c);var d=c.type;this.$5&&k(this.$5.getPayload(),a);var e={},f=b("AdsDataDispatchUtils").mergeReducers(b("AdsDataDispatchUtils").getDataReducers(c),this.$9);for(var f=f,g=Array.isArray(f),j=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(g){if(j>=f.length)break;l=f[j++]}else{j=f.next();if(j.done)break;l=j.value}l=l;e[l.provider]=this.$17.bind(this,l);this.__callbacksNames[l.provider]=l.provider}b("AdsDataDispatchUtils").shouldSkipLegacyFluxDispatch(c)||(b("gkx")("AT5lJ8-3q5YUY6e7igLwYoQrFsjizZVZahBlI98yjOcGkGcpxEvcBVBRUQfAWyNnxUg79RnvjQAxIoL8N6L7aw6a")?(Object.assign(e,this.$3),Object.assign(e,this.$2[d])):Object.assign(e,this.$1));this.$5=new(b("AdsDispatchCycle"))(e,a);this.$5.start();this.$5=null;i(c);b("AdsDataAtomActionTracking").didDispatch(c)};a.prototype.dispatch=function(a,c){__p&&__p();if(this.$11){this.$12.push([a,c]);return}this.$16(a);var d=this.__dispatchSeqNumber;b("AdsDataAtomInstrumentation").onActionStart(a.action.type,d);b("AdsReactBatchedUpdatesUtils").batchUpdatesIfReactIsLoaded(function(){b("gkx")("AT4RrKECfeu0dwEyWZXOaqlikDdCjlGcpxqsqcTpwi2VzpIQ6VBeA61bPQ3aUjnjCck")?this.__doAsyncDispatch(a):this.__dispatch(a)}.bind(this));this.$19(d,a.action,c);this.$20();b("AdsDataAtomInstrumentation").onActionEnd(a.action.type,d)};a.prototype.$20=function(){var a=this.$7;this.$7=[];a.forEach(function(a){return a()});this.$7.length=0};a.prototype.__doAsyncDispatch=function(a){return b("abstractMethod")("DataAtomBase","__doAsyncDispatch")};a.prototype.batchDispatches_ASK_ADS_SPEED_BEFORE_USE=function(a){var b=this.$6;this.$6=!0;a();this.$6=b;this.$6||this.dispatch({action:{priority:"HIGH",type:"FLUSH_INFORMS"}})};a.prototype.shouldAllowInforms=function(){if(this.$6)return!1;if(!b("gkx")("AT4RrKECfeu0dwEyWZXOaqlikDdCjlGcpxqsqcTpwi2VzpIQ6VBeA61bPQ3aUjnjCck"))return!0;var a=this.__allowInforms;a!=null||g(0,undefined);return a};a.prototype.handleUpdateFromInitialServer=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromServerResponse=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromURLParams=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromUnknownSource=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromViewAction=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromCleanUpAction=function(a){this.dispatch({action:a})};a.prototype.handleUpdateFromTrackingEvent=function(a){this.dispatch({action:a})};a.prototype.addPostDispatchCallback=function(a){this.isDispatching()?this.$7.push(a):a()};a.prototype.setCatchErrors=function(a){this.__catchErrors=a};a.prototype.explicitlyRegisterStore=function(a){};a.prototype.explicitlyRegisterStores=function(a){};a.prototype.pauseActionDispatches=function(){this.$11=!0};a.prototype.__dataPluginsRegisterLegacyFluxReducer=function(a){this.$9.push(a),this.__previousLegacyFluxReducerProviderState[a.provider]=a.providerInitialState()};a.prototype.__dataPluginsGetAlteredState=function(){return this.__dataPluginsAlteredState};a.prototype.__dataPluginsAddListener=function(a,b){return this.$8.addListener(a,b)};a.prototype.__dataPluginsAddDebugListener=function(a,b){return this.$10.addListener(a,b)};a.prototype.__dataPluginsRemoveAllDebugListeners=function(a){this.$10.removeAllListeners(a)};a.prototype.__dataPluginsDispatch=function(a,b){this.dispatch({action:a},b)};function j(a){return a&&a.action&&a.action.type||"<unknown>"}function k(a,b){g(0,undefined,j(b),j(a))}e.exports=a}),null);